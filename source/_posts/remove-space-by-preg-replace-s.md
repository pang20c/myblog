title: "preg_replace \\s 去不掉的空格"
date: 2015-02-27 17:42:11
tags:
- php
category:
- php
---

在做文章摘要功能时需要去除多余的空格，但是有一排空格却一直去不掉
```php
$str = '　　　　11111';
$str = preg_replace("/[\s]/",'',$str);
echo $str;#输出后发现还是有开头的空格
```
后来一次偶然的尝试发现正则如果修改为/[\s]/u 就可以去除掉了

官方的解释是u修饰符修正了perl 正则与utf-8编码不兼容的模式 

一番折腾 我把那个特殊的空格字符转换成unicode编码后 他的编码是 \u3000
那么我直接用正则去匹配这个unicode的可以么 ？测试后也是可行的
写法如下 （以下纯属折腾以加深印象当然还是  /[\s]/u 最简单） 
```php
$str = '　　　　11111';
$str = preg_replace("/[\x{3000}]/u",'',$str);
echo $str;
```